0 HEAD
1 SOUR Roots
2 VERS 1.11 (4-Feb-01)
2 CORP Alex Waugh
3 ADDR http://www.ecs.soton.ac.uk/~ajw498/
0 _MARRTYPE
1 _SEP 0
1 _JOIN 0
0 @F1@ _FILEINFO
1 _TITLE Bloggs Family Tree
1 _NEXTNEWPERSON 56
1 _PERSONUSER 0
2 _DESC Date of birth
2 _GEDCOM INDI.BIRT.DATE
1 _PERSONUSER 1
2 _DESC Place of birth
2 _GEDCOM INDI.BIRT.PLAC
1 _PERSONUSER 2
2 _DESC Christening
2 _GEDCOM INDI.CHR.DATE
1 _PERSONUSER 3
2 _DESC Date of death
2 _GEDCOM INDI.DEAT.DATE
1 _PERSONUSER 4
2 _DESC Occupation
2 _GEDCOM INDI.OCCU
1 _PERSONUSER 5
2 _DESC ID
2 _GEDCOM INDI.IDNO
1 _PERSONUSER 6
2 _DESC Event
2 _GEDCOM INDI.EVEN
1 _PERSONUSER 7
2 _DESC Notes
2 _GEDCOM INDI.NOTE
1 _PERSONUSER 8
2 _DESC 
2 _GEDCOM 
1 _PERSONUSER 9
2 _DESC 
2 _GEDCOM 
1 _MARRIAGEUSER 0
2 _DESC Place
2 _GEDCOM FAM.MARR.PLAC
1 _MARRIAGEUSER 1
2 _DESC Date
2 _GEDCOM FAM.MARR.DATE
1 _MARRIAGEUSER 2
2 _DESC Divorce
2 _GEDCOM FAM.DIV
1 _MARRIAGEUSER 3
2 _DESC Notes
2 _GEDCOM FAM.NOTE
1 _MARRIAGEUSER 4
2 _DESC 
2 _GEDCOM 
0 @1@ INDI
1 NAME Grandfather /Bloggs/
1 SEX M
1 BIRT
2 DATE 23/7/1906
1 FAMS @2@
1 FAMS @3@
0 @2@ FAM
1 HUSB @1@
1 WIFE @4@
1 CHIL @12@
0 @3@ FAM
1 HUSB @1@
1 WIFE @5@
1 CHIL @8@
0 @4@ INDI
1 NAME Second wife/Bloggs/
1 SEX F
1 BIRT
2 DATE 14/4/1921
1 FAMS @2@
0 @5@ INDI
1 NAME Grandmother /Bloggs/
1 SEX F
1 BIRT
2 DATE 8/12/1908
1 FAMS @3@
0 @6@ INDI
1 NAME Mother /Bloggs/
1 SEX F
1 BIRT
2 DATE 29/10/56
1 FAMS @7@
0 @7@ FAM
1 HUSB @8@
1 WIFE @6@
1 CHIL @9@
1 CHIL @10@
1 CHIL @11@
0 @8@ INDI
1 NAME Father /Bloggs/
1 SEX M
1 BIRT
2 DATE 4/7/54
1 FAMS @7@
1 FAMC @3@
0 @9@ INDI
1 NAME Jenny /Bloggs/
1 SEX F
1 BIRT
2 DATE 2/9/92
1 FAMC @7@
0 @10@ INDI
1 NAME Jim /Bloggs/
1 SEX M
1 BIRT
2 DATE 1/5/89
1 FAMC @7@
0 @11@ INDI
1 NAME Fred /Bloggs/
1 SEX M
1 BIRT
2 DATE 12/3/88
1 FAMC @7@
0 @12@ INDI
1 NAME Illegitimate /Bloggs/
1 FAMC @2@
0 @G1@ _GRAPHICS
1 _LUAFILE
2 _LINE 
2 _LINE -- Let Roots know what fonts will want to use
2 _LINE font=ClaimFont("Trinity.Medium",12);
2 _LINE titlefont=ClaimFont("Homerton.Bold.Oblique",24);
2 _LINE 
2 _LINE -- Define the colours we will use
2 _LINE -- Colour() takes the red, green and blue components (range 0-255) of the colour
2 _LINE red=Colour(255,0,0);
2 _LINE green=Colour(0,255,0);
2 _LINE blue=Colour(0,0,255);
2 _LINE black=Colour(0,0,0);
2 _LINE grey=Colour(245,245,245);
2 _LINE white=Colour(255,255,255);
2 _LINE 
2 _LINE -- Define the default distances and sizes
2 _LINE -- Roots will use these for newly created objects
2 _LINE gapheightabove=50; -- Gap between the top of a person and the line joining their siblings
2 _LINE gapheightbelow=50; -- Gap between the bottom of a person and the line joining their children
2 _LINE personwidth=280;   -- Width of a person
2 _LINE personheight=100;  -- Height of a person
2 _LINE gapwidth=100;      -- Horizontal gap between two unmarried people
2 _LINE marriagewidth=84;  -- Width of a marriage
2 _LINE windowborder=30;   -- Gap between outermost person and the window edge
2 _LINE titleheight=100;   -- Height of the title
2 _LINE 
2 _LINE 
2 _LINE -- Constants (Roots does not place any meaning on these)
2 _LINE linewidth=0;
2 _LINE 
2 _LINE 
2 _LINE -- This function gets called by Roots whenever it needs to redraw a marriage
2 _LINE function RedrawMarriage(marriage,x,y,width,height)
2 _LINE -- Draw the two horizontal lines
2 _LINE PlotLine(x,y+30,x+width,y+30,linewidth,black);
2 _LINE PlotLine(x,y+70,x+width,y+70,linewidth,black);
2 _LINE -- Draw the vertical line if there are any children of the marriage
2 _LINE if GetChild(marriage) then PlotLine(x+width/2,y+30,x+width/2,y-50,linewidth,black) end
2 _LINE end
2 _LINE 
2 _LINE function CalcNameAndLength(person)
2 _LINE -- Work out what the full name of the person is
2 _LINE name="";
2 _LINE text=GetField(person,"forename");
2 _LINE if strlen(text)>0 then name=name..text.." " end
2 _LINE text=GetField(person,"middlenames");
2 _LINE if strlen(text)>0 then name=name..text.." " end
2 _LINE name=name..GetField(person,"surname");
2 _LINE tx=GetTextDimensions(font,name);
2 _LINE return name,tx;
2 _LINE end
2 _LINE 
2 _LINE -- This function gets called by Roots whenever any details about the person change
2 _LINE function PersonChanged(person)
2 _LINE name,tx=CalcNameAndLength(person);
2 _LINE tx=tx+12;
2 _LINE if personwidth>tx then tx=personwidth end
2 _LINE SetWidth(person,tx);
2 _LINE end
2 _LINE 
2 _LINE -- This function gets called by Roots whenever it needs to redraw a person
2 _LINE function RedrawPerson(person,x,y,width,height)
2 _LINE -- Draw the background (this must be done first otherwise it will overwrite what has already been drawn)
2 _LINE PlotRectangleFilled(x,y,width,height,grey);
2 _LINE -- Draw the border
2 _LINE PlotRectangle(x,y,width,height,linewidth,black);
2 _LINE -- Work out what the full name of the person is
2 _LINE name,tx=CalcNameAndLength(person);
2 _LINE -- Work out what colour to use, depending on the sex of the person
2 _LINE colour=green;
2 _LINE sex=GetField(person,"sex");
2 _LINE if sex=="M" then colour=blue end
2 _LINE if sex=="F" then colour=red end
2 _LINE -- Draw the name and date of birth
2 _LINE PlotText(x+(width-tx)/2,y+60,font,grey,colour,name);
2 _LINE text=GetField(person,"date of birth");
2 _LINE tx=GetTextDimensions(font,text);
2 _LINE PlotText(x+(width-tx)/2,y+20,font,grey,black,text);
2 _LINE -- Draw the vertical line to connect to the sibling line if the person has parents
2 _LINE if GetParentsMarriage(person) then PlotLine(x+width/2,y+height,x+width/2,y+height+50,linewidth,black) end
2 _LINE end
2 _LINE 
2 _LINE -- This function gets called by Roots whenever it needs to redraw a line joining siblings together
2 _LINE -- The line could be horizontal or vertical
2 _LINE function RedrawLine(x,y,width,height)
2 _LINE PlotLine(x,y,x+width,y+height,linewidth,black);
2 _LINE end
2 _LINE 
2 _LINE -- This function gets called by Roots whenever it needs to redraw the title
2 _LINE function RedrawTitle(title,x,y,width,height)
2 _LINE -- Find the width of the text
2 _LINE tx=GetTextDimensions(titlefont,title);
2 _LINE -- Draw the text, centred horizontally
2 _LINE PlotText(x+(width-tx)/2,y+50,titlefont,white,black,title);
2 _LINE end
2 _LINE 
2 _LINE 
1 _CURRENTSTYLE WithDOB
0 @W1@ _WINDOWS
1 _COORDS
2 _SCREENRECT
3 _MIN
4 _X 120
4 _Y 416
3 _MAX
4 _X 1412
4 _Y 1076
2 _SCROLL
3 _X 60
3 _Y 230
1 _GENERATIONS 0
1 _SCALE 100
1 _TYPE 1
0 @L1@ _LAYOUT
1 _PERSON @1@
2 _X 475
2 _Y 0
2 _W 280
2 _H 100
2 _F 249087
1 _PERSON @6@
2 _X 657
2 _Y -200
2 _W 280
2 _H 100
2 _F 249087
1 _PERSON @8@
2 _X 293
2 _Y -200
2 _W 280
2 _H 100
2 _F 249087
1 _PERSON @9@
2 _X 860
2 _Y -400
2 _W 280
2 _H 100
2 _F 249087
1 _PERSON @10@
2 _X 475
2 _Y -400
2 _W 280
2 _H 100
2 _F 249087
1 _PERSON @11@
2 _X 90
2 _Y -400
2 _W 280
2 _H 100
2 _F 249087
1 _PERSON @5@
2 _X 111
2 _Y 0
2 _W 280
2 _H 100
2 _F 249087
1 _PERSON @4@
2 _X 839
2 _Y 0
2 _W 280
2 _H 100
2 _F 249087
1 _PERSON @12@
2 _X 1042
2 _Y -200
2 _W 280
2 _H 100
2 _F 249087
0 TRLR
